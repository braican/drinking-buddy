<section class="block">
  <div data-loader="brewery" data-brewery="<% brewery %>" data-store="true">
    <p class="js-loading">Loading...</p>

    <script type="text/template">
      <div class="js-brewery">
        <header class="brewery__header">
          <h2 class="brewery__name">{{ brewery_name }}</h2>
          <p>{{ loc }}</p>
          <p>Overall rating: <strong>{{ overallRating }}</strong></p>
        </header>

        <div class="tabs js-tabs">
          <nav class="tab__nav">
            <ul>
              <li><button data-tab="beers" class="tab__button">Beers</button></li>
              <li><button data-tab="checkins" class="tab__button">Checkins</button></li>
            </ul>
          </nav>

          <div class="tabs__content">

            <div class="tab" data-tab="beers">
              <header class="brewery-beers__header">
                <div class="brewery-beers__stats">
                  <p>{{ checkinCount }} checkins</p>
                  <p>{{ beerCount }} unique beers</p>
                </div>
                <div class="brewery-beers__sort">
                  <button class="brewrey-beers__sort-display js-beer-sort-control">
                    <span class="brewery-beers__sort-display-label">Sort by</span>
                    <span class="js-beer-sort-display">Alphabetical</span>
                  </button>

                  <ul class="brewery-beers__sort-options js-beer-sort-options">
                    <li class="brewery-beers__sort-option active"><button data-sort="alphabetical">Alphabetical</button></li>
                    <li class="brewery-beers__sort-option"><button data-sort="hads">Most hads</button></>
                    <li class="brewery-beers__sort-option"><button data-sort="rating">Highest rated</button></li>
                  </ul>
                </div>
              </header>

              <ul class="brewery__beers js-beerlist">
                {{ #beers }}
                <li class="beer">
                  <div>
                    <p class="beer__name"><strong>{{ beer }}</strong></p>
                    <p class="beer__style">{{ style }}</p>
                    <p>Last checkin: {{ #formatDateShort }}{{ lastHad }}{{ /formatDateShort }}</p>
                  </div>
                  <div class="beer__stats">
                    <p class="beer__rating">{{ rating }}</p>
                    <p>{{ checkinCount  }} hads</p>
                  </div>
                </li>
                {{ /beers }}
              </ul>
            </div>

            <div class="tab" data-tab="checkins">
              <p>{{ checkinCount }} checkins</p>

              <ul class="brewery__checkin-list">
                {{#checkins}}
                  <li class="checkin">
                    <p><strong>{{ beer.beer_name }}</strong></p>
                    <p>{{ #formatDate }}{{ created_at }}{{ /formatDate }}</p>
                    <div>{{ #formatRating }}{{ rating_score }}{{ /formatRating }}</div>
                  </li>
                {{/checkins}}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </script>
  </div>
</section>